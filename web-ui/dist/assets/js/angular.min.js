angular.module("poketrainer",["poketrainer.Module.Templates","Poketrainer.Module.SocketEventEmitter","Poketrainer.Service.Navigation","Poketrainer.Service.SocketEvent","Poketrainer.Service.Socket","Poketrainer.State.Abstracts","Poketrainer.State.Status","Poketrainer.State.Users","ui.router","ngMaterial","ngMessages"]).config(["$urlRouterProvider","$locationProvider","$urlMatcherFactoryProvider","$mdThemingProvider",function(e,t,o,n){e.rule(function(e,t){var o=t.url().toLowerCase();if(!("/"===o[o.length-1]||o.indexOf("/?")>-1))return o.indexOf("?")>-1?o.replace("?","/?"):o+"/"}).otherwise("/"),o.strictMode(!1),n.theme("default").primaryPalette("blue").accentPalette("red")}]).run(["$state","$rootScope","$document",function(e,t,o){t.$on("inventory:updated",function(e,t){}),t.$on("$stateChangeStart",function(){o.find(".screen-loading-overlay").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(){o.find(".screen-loading-overlay").addClass("hidden")}),t.$on("$stateChangeError",function(t,n,r,a,s,i){"offline"===i&&(e.go("public.users"),o.find(".screen-loading-overlay").removeClass("hidden"))})}]),angular.module("Poketrainer.Module.SocketEventEmitter",["Poketrainer.Service.Socket"]).run(["$rootScope","PokeSocket","SocketEvent",function(e,t,o){t.forward(o.UserStatus),t.on(o.Data,function(t){e.$broadcast(t.event+":"+t.action,t.data)})}]),angular.module("Poketrainer.State.Abstracts",["ui.router"]).config(["$stateProvider",function(e){e.state("public",{"abstract":!0,views:{header:{templateUrl:"states/abstracts/header.tpl.html",controller:"HeaderController"},content:{template:"<ui-view/>"}}})}]).controller("HeaderController",["$rootScope","$scope","$state","Navigation",function(e,t,o,n){t.navigation=n.primary.get(),t.state=o.current.name,e.$on("$stateChangeSuccess",function(e,o,n,r,a){t.state=o.name})}]),angular.module("Poketrainer.State.Status",["ui.router","uiGmapgoogle-maps","chart.js","easypiechart","datatables","ui-leaflet","nemLogging"]).config(["$stateProvider","uiGmapGoogleMapApiProvider",function(e,t){t.configure({v:"3.24",libraries:"weather,geometry,visualization"}),e.state("public.dashboard",{url:"/dashboard/:username",resolve:{locationData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"location"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["location"]}),r.promise}],inventoryData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"inventory"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["inventory"]}),r.promise}],playerData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["player"]}),r.promise}],playerStatsData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"player_stats"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["player_stats"]}),r.promise}],pokemonData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"pokemon"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["pokemon"]}),r.promise}],attacksData:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function(e){if(!angular.isUndefined(e)&&"attacks"==e.type)return e.success?void r.resolve(angular.fromJson(e.data)):void r.reject("offline")};return o.on(n.Request,a),o.emit(n.Request,{username:t.username,types:["attacks"]}),r.promise}]},controller:"DashboardController",templateUrl:"states/dashboard/dashboard.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("DashboardController",["$scope","$stateParams","$mdToast","PokeSocket","leafletData","locationData","inventoryData","playerData","playerStatsData","pokemonData","attacksData","SocketEvent","DTOptionsBuilder",function(e,t,o,n,r,a,s,i,l,u,c,p,d){var m=function(e,o){t.username==o.username&&"offline"==o.status&&$state.go("public.users")};e.$on(p._prefix+p.UserStatus,m),e.$on("$destroy",function(){n.emit(p.Leave,{room:t.username})}),n.emit(p.Join,{room:t.username});var v,f=function h(t){if(e.evolve_disabled=!1,e.transfer_disabled=!1,t.success)for(var r=e.pokemon.length-1;r>=0;r--)e.pokemon[r].id==v&&e.pokemon.splice(r,1);v=0,n.removeListener(p.Transfer,h),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.transfer_disabled=!1,e.transfer=function(o){v=o,e.evolve_disabled=!0,e.transfer_disabled=!0,n.on(p.Transfer,f),n.emit(p.Transfer,{username:t.username,p_id:o})};var k=function $(t){e.evolve_disabled=!1,e.transfer_disabled=!1,n.removeListener(p.Evolve,$),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.evolve_disabled=!1,e.evolve=function(o){e.evolve_disabled=!0,e.transfer_disabled=!0,n.on(p.Evolve,k),n.emit(p.Evolve,{username:t.username,p_id:o})};var g=function b(t){e.snipe_disabled=!1,n.removeListener(p.Snipe,b),o.show(o.simple().textContent(t.message).position("top center").hideDelay(3e3))};e.snipe_coords="",e.snipe_disabled=!1,e.snipe_auto=!1,e.snipe=function(o){e.snipe_disabled=!0,n.on(p.Snipe,g),n.emit(p.Snipe,{username:t.username,latlng:o})},e.$on("inventory:updated",function(t,o){e.inventory=o,S()}),e.$on("player_stats:updated",function(t,o){e.playerStats=o,S()}),e.$on("player:updated",function(t,o){e.player=o,S()}),e.$on("pokemon:caught",function(t,n){var r=n;e.pokemon.push(r),S(),o.show(o.simple().textContent("Caught: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:released",function(t,n){for(var r=n,a=e.pokemon.length-1;a>=0;a--)e.pokemon[a].id==r.id&&e.pokemon.splice(a,1);S(),o.show(o.simple().textContent("Released: "+r.name+" (IV: "+Math.floor(r.iv)+" | CP: "+r.cp+")").position("top center").hideDelay(3e3))}),e.$on("pokemon:evolved",function(t,n){for(var r=n.old,a=n["new"],s=e.pokemon.length-1;s>=0;s--)e.pokemon[s].id==r.id&&e.pokemon.splice(s,1);e.pokemon.push(a),o.show(o.simple().textContent("Evolved: "+r.name+" to "+a.name+" (IV: "+Math.floor(a.iv)+" | CP: "+a.cp+")").position("top center").hideDelay(3e3))}),e.$on("fort:spun",function(e,t){o.show(o.simple().textContent("Fort spun, reward: "+t.reward).position("top center").hideDelay(3e3))});var y=0;e.$on("position:update",function(t,o){if(y++,y%5==0){e.markers.bot.lat=o[0],e.markers.bot.lng=o[1];var n={lat:o[0],lng:o[1]};e.paths.main.latlngs.push(n)}}),e.player=i,e.playerStats=l,e.inventory=s,e.pokemon=u,e.attacks=c;var S=function(){e.playerStats.xpPercent=Math.floor((e.playerStats.experience-e.playerStats.prev_level_xp)/(e.playerStats.next_level_xp-e.playerStats.prev_level_xp)*100),e.playerStats.uniquePokedexPercent=Math.floor(e.playerStats.unique_pokedex_entries/151*100),e.playerStats.pokemonInvPercent=Math.floor(e.pokemon.length/e.player.max_pokemon_storage*100),e.playerStats.itemsInvPercent=Math.floor(e.inventory.item_count/e.player.max_item_storage*100)};S(),e.$on("$viewContentLoaded",function(){r.getMap().then(function(e){setTimeout(function(){e.invalidateSize()},3e3)})}),e.map={center:{lat:a[0],lng:a[1],zoom:15}},e.markers={bot:{lat:a[0],lng:a[1],message:e.player.username,focus:!0,draggable:!1}},e.paths={main:{color:"#F44336",weight:4,latlngs:[{lat:a[0],lng:a[1]}]}},e.pokemonDataTableOptions=d.newOptions().withOption("order",[[0,"desc"]]).withOption("stateSave",!0),e.expLvlOptions={animate:{duration:1e3,enabled:!0},barColor:"#03A9F4",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.uniquePokedexOptions={animate:{duration:1e3,enabled:!0},barColor:"#FFC107",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.pokemonInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#009688",scaleColor:!1,lineWidth:10,lineCap:"circle"},e.itemsInvOptions={animate:{duration:1e3,enabled:!0},barColor:"#F44336",scaleColor:!1,lineWidth:10,lineCap:"circle"}}]),angular.module("Poketrainer.State.Users",["ui.router"]).config(["$stateProvider",function(e){e.state("public.users",{url:"/",resolve:{Users:["$q","$stateParams","PokeSocket","SocketEvent",function(e,t,o,n){var r=e.defer(),a=function s(e){if(!angular.isUndefined(e)&&e.success&&angular.isArray(e.users)){o.removeListener(n.UserList,s);for(var t=0;t<e.users.length;t++)e.users[t].status="unknown";r.resolve(e.users)}};return o.on(n.UserList,a),o.emit(n.UserList),r.promise}]},controller:"UsersController",templateUrl:"states/users/users.tpl.html"})}]).run(["Navigation",function(e){e.primary.register("Users","public.users",30,"md md-event-available","public.users")}]).controller("UsersController",["$scope","Users","PokeSocket","SocketEvent",function(e,t,o,n){e.users=t;var r=function(t,o){for(var n=0;n<e.users.length;n++)e.users[n].username==o.username&&(e.users[n].status=o.status)};e.$on(n._prefix+n.UserStatus,r)}]),angular.module("Poketrainer.Service.Navigation",[]).factory("Navigation",function(){var e=[],t=function(){return e.sort(function(e,t){var o=e.Priority-t.Priority;return 0===o?e.Label.localeCompare(t.Label):o})},o=function(t,o,n,r,a){"string"!=typeof r&&(r="md md-chevron-right"),"string"!=typeof a&&(a=o),("number"!=typeof n||n<0)&&(n=10),e.push({Label:t,State:o,ActiveState:a,Priority:n,Icon:r})};return{primary:{get:t,register:o}}}),angular.module("Poketrainer.Service.SocketEvent",[]).factory("SocketEvent",function(){return{_prefix:"socket:",UserList:"users",UserStatus:"user_status",Request:"pull",Data:"push",Join:"join",Leave:"leave",Transfer:"transfer",Evolve:"evolve",Snipe:"snipe"}}),angular.module("Poketrainer.Service.Socket",["btford.socket-io"]).factory("PokeSocket",["socketFactory","$location",function(e,t){var o=window.location.pathname.replace(/\/+$/g,"")+"/socket.io";return e({ioSocket:io.connect(window.location.protocol+"//"+window.location.host+"/poketrainer",{path:o})})}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlLlNvY2tldEV2ZW50RW1pdHRlci5qcyIsInN0YXRlcy9hYnN0cmFjdHMvc3RhdGUuYWJzdHJhY3RzLmpzIiwic3RhdGVzL2Rhc2hib2FyZC9zdGF0ZS5kYXNoYm9hcmQuanMiLCJzdGF0ZXMvdXNlcnMvc3RhdGUudXNlcnMuanMiLCJtb2R1bGVzL3NlcnZpY2VzL3NlcnZpY2UuTmF2aWdhdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciIsIiRtZFRoZW1pbmdQcm92aWRlciIsInJ1bGUiLCIkaW5qZWN0b3IiLCIkbG9jYXRpb24iLCJwYXRoIiwidXJsIiwidG9Mb3dlckNhc2UiLCJsZW5ndGgiLCJpbmRleE9mIiwicmVwbGFjZSIsIm90aGVyd2lzZSIsInN0cmljdE1vZGUiLCJ0aGVtZSIsInByaW1hcnlQYWxldHRlIiwiYWNjZW50UGFsZXR0ZSIsInJ1biIsIiRzdGF0ZSIsIiRyb290U2NvcGUiLCIkZG9jdW1lbnQiLCIkb24iLCJldmVudCIsImRhdGEiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInRvU3RhdGUiLCJ0b1BhcmFtcyIsImZyb21TdGF0ZSIsImZyb21QYXJhbXMiLCJlcnJvciIsImdvIiwiUG9rZVNvY2tldCIsIlNvY2tldEV2ZW50IiwiZm9yd2FyZCIsIlVzZXJTdGF0dXMiLCJvbiIsIkRhdGEiLCIkYnJvYWRjYXN0IiwiYWN0aW9uIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsImFic3RyYWN0Iiwidmlld3MiLCJoZWFkZXIiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJjb250ZW50IiwidGVtcGxhdGUiLCIkc2NvcGUiLCJOYXZpZ2F0aW9uIiwibmF2aWdhdGlvbiIsInByaW1hcnkiLCJnZXQiLCJjdXJyZW50IiwibmFtZSIsInVpR21hcEdvb2dsZU1hcEFwaVByb3ZpZGVyIiwiY29uZmlndXJlIiwidiIsImxpYnJhcmllcyIsInJlc29sdmUiLCJsb2NhdGlvbkRhdGEiLCIkcSIsIiRzdGF0ZVBhcmFtcyIsImQiLCJkZWZlciIsImxvY2F0aW9uRGF0YUNiIiwibWVzc2FnZSIsImlzVW5kZWZpbmVkIiwidHlwZSIsInN1Y2Nlc3MiLCJmcm9tSnNvbiIsInJlamVjdCIsIlJlcXVlc3QiLCJlbWl0IiwidXNlcm5hbWUiLCJ0eXBlcyIsInByb21pc2UiLCJpbnZlbnRvcnlEYXRhIiwiaW52ZW50b3J5RGF0YUNiIiwicGxheWVyRGF0YSIsInBsYXllckRhdGFDYiIsInBsYXllclN0YXRzRGF0YSIsInBsYXllclN0YXRzRGF0YUNiIiwicG9rZW1vbkRhdGEiLCJwb2tlbW9uRGF0YUNiIiwiYXR0YWNrc0RhdGEiLCJhdHRhY2tzRGF0YUNiIiwicmVnaXN0ZXIiLCIkbWRUb2FzdCIsImxlYWZsZXREYXRhIiwiRFRPcHRpb25zQnVpbGRlciIsInVzZXJFdmVudFVwZGF0ZSIsInN0YXR1cyIsIl9wcmVmaXgiLCJMZWF2ZSIsInJvb20iLCJKb2luIiwidHJhbnNmZXJfcF9pZCIsInRyYW5zZmVyQ2IiLCJldm9sdmVfZGlzYWJsZWQiLCJ0cmFuc2Zlcl9kaXNhYmxlZCIsImkiLCJwb2tlbW9uIiwiaWQiLCJzcGxpY2UiLCJyZW1vdmVMaXN0ZW5lciIsIlRyYW5zZmVyIiwic2hvdyIsInNpbXBsZSIsInRleHRDb250ZW50IiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJ0cmFuc2ZlciIsInBfaWQiLCJldm9sdmVDYiIsIkV2b2x2ZSIsImV2b2x2ZSIsInNuaXBlZENiIiwic25pcGVfZGlzYWJsZWQiLCJTbmlwZSIsInNuaXBlX2Nvb3JkcyIsInNuaXBlX2F1dG8iLCJzbmlwZSIsImxhdGxuZyIsImludmVudG9yeSIsInVwZGF0ZVBlcmNlbnRhZ2VzIiwicGxheWVyU3RhdHMiLCJwbGF5ZXIiLCJwdXNoIiwiTWF0aCIsImZsb29yIiwiaXYiLCJjcCIsInBva2Vtb25fb2xkIiwib2xkIiwicG9rZW1vbl9uZXciLCJyZXdhcmQiLCJwb3NpdGlvblVwZGF0ZXMiLCJtYXJrZXJzIiwiYm90IiwibGF0IiwibG5nIiwibmV3TG9jYXRpb24iLCJwYXRocyIsIm1haW4iLCJsYXRsbmdzIiwiYXR0YWNrcyIsInhwUGVyY2VudCIsImV4cGVyaWVuY2UiLCJwcmV2X2xldmVsX3hwIiwibmV4dF9sZXZlbF94cCIsInVuaXF1ZVBva2VkZXhQZXJjZW50IiwidW5pcXVlX3Bva2VkZXhfZW50cmllcyIsInBva2Vtb25JbnZQZXJjZW50IiwibWF4X3Bva2Vtb25fc3RvcmFnZSIsIml0ZW1zSW52UGVyY2VudCIsIml0ZW1fY291bnQiLCJtYXhfaXRlbV9zdG9yYWdlIiwiZ2V0TWFwIiwidGhlbiIsIm1hcCIsInNldFRpbWVvdXQiLCJpbnZhbGlkYXRlU2l6ZSIsImNlbnRlciIsInpvb20iLCJmb2N1cyIsImRyYWdnYWJsZSIsImNvbG9yIiwid2VpZ2h0IiwicG9rZW1vbkRhdGFUYWJsZU9wdGlvbnMiLCJuZXdPcHRpb25zIiwid2l0aE9wdGlvbiIsImV4cEx2bE9wdGlvbnMiLCJhbmltYXRlIiwiZHVyYXRpb24iLCJlbmFibGVkIiwiYmFyQ29sb3IiLCJzY2FsZUNvbG9yIiwibGluZVdpZHRoIiwibGluZUNhcCIsInVuaXF1ZVBva2VkZXhPcHRpb25zIiwicG9rZW1vbkludk9wdGlvbnMiLCJpdGVtc0ludk9wdGlvbnMiLCJVc2VycyIsInVzZXJFdmVudENiIiwiaXNBcnJheSIsInVzZXJzIiwiVXNlckxpc3QiLCJmYWN0b3J5IiwiaGVhZGVyTmF2IiwiZ2V0UHJpbWFyeU1lbnUiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eSIsIlByaW9yaXR5IiwiTGFiZWwiLCJsb2NhbGVDb21wYXJlIiwicmVnaXN0ZXJQcmltYXJ5TWVudSIsImxhYmVsIiwiaWNvbiIsImFjdGl2ZVN0YXRlIiwiU3RhdGUiLCJBY3RpdmVTdGF0ZSIsIkljb24iLCJzb2NrZXRGYWN0b3J5Iiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImlvU29ja2V0IiwiaW8iLCJjb25uZWN0IiwicHJvdG9jb2wiLCJob3N0Il0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBQUMsT0FBQSxlQUNBLCtCQUNBLHdDQUNBLGlDQUNBLGtDQUNBLDZCQUNBLDhCQUNBLDJCQUNBLDBCQUNBLFlBQ0EsYUFDQSxlQUNBQyxRQUNBLHFCQUNBLG9CQUNBLDZCQUNBLHFCQUNBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBSUFILEVBQUFJLEtBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBRSxNQUFBQyxhQUVBLE1BQUEsTUFBQUYsRUFBQUEsRUFBQUcsT0FBQSxJQUFBSCxFQUFBSSxRQUFBLFVBR0EsTUFBQUosR0FBQUksUUFBQSxRQUNBSixFQUFBSyxRQUFBLElBQUEsTUFFQUwsRUFBQSxNQUNBTSxVQUFBLEtBQ0FYLEVBQUFZLFlBQUEsR0FDQVgsRUFBQVksTUFBQSxXQUFBQyxlQUFBLFFBQUFDLGNBQUEsVUFFQUMsS0FDQSxTQUNBLGFBQ0EsWUFDQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBRCxFQUFBRSxJQUFBLG9CQUFBLFNBQUFDLEVBQUFDLE1BRUFKLEVBQUFFLElBQUEsb0JBQUEsV0FDQUQsRUFBQUksS0FBQSwyQkFBQUMsWUFBQSxZQUVBTixFQUFBRSxJQUFBLHNCQUFBLFdBQ0FELEVBQUFJLEtBQUEsMkJBQUFFLFNBQUEsWUFFQVAsRUFBQUUsSUFBQSxvQkFBQSxTQUFBQyxFQUFBSyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLFlBQUFBLElBQ0FiLEVBQUFjLEdBQUEsZ0JBQ0FaLEVBQUFJLEtBQUEsMkJBQUFDLFlBQUEsZ0JBTUE3QixRQUFBQyxPQUFBLHlDQUFBLCtCQUFBb0IsS0FDQSxhQUNBLGFBQ0EsY0FDQSxTQUFBRSxFQUFBYyxFQUFBQyxHQUNBRCxFQUFBRSxRQUFBRCxFQUFBRSxZQUNBSCxFQUFBSSxHQUFBSCxFQUFBSSxLQUFBLFNBQUFmLEdBRUFKLEVBQUFv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QUFBakssSUFFQSxnQkFBQTBKLElBQUFBLEVBQUEsS0FDQUEsRUFBQSxJQUVBTCxFQUFBN0QsTUFDQW9FLE1BQUFHLEVBQ0FHLE1BQUFsSyxFQUNBbUssWUFBQUYsRUFDQU4sU0FBQUQsRUFDQVUsS0FBQUosSUFHQSxRQUNBckosU0FDQUMsSUFBQTBJLEVBQ0F2RyxTQUFBK0csTUFJQTVNLFFBQUFDLE9BQUEsc0NBQUFpTSxRQUFBLGNBQUEsV0M3REEsT0FDQS9GLFFBQUEsVUFDQThGLFNBQUEsUUFDQXpKLFdBQUEsY0FDQXNDLFFBQUEsT0FDQXBDLEtBQUEsT0FDQTRELEtBQUEsT0FDQUYsTUFBQSxRQUNBWSxTQUFBLFdBQ0FTLE9BQUEsU0FDQUksTUFBQSxXQUdBN0gsUUFBQUMsT0FBQSw4QkFBQSxxQkFBQWlNLFFBQUEsY0FDQSxnQkFDQSxZQUNBLFNBQUFpQixFQUFBMU0sR0FDQSxHQUFBQyxHQUFBME0sT0FBQUMsU0FBQUMsU0FBQXZNLFFBQUEsUUFBQSxJQUFBLFlBRUEsT0FBQW9NLElBQUFJLFNBQUFDLEdBQUFDLFFBQUFMLE9BQUFDLFNBQUFLLFNBQUEsS0FBQU4sT0FBQUMsU0FBQU0sS0FBQSxnQkFBQWpOLEtBQUFBIiwiZmlsZSI6ImFuZ3VsYXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ3Bva2V0cmFpbmVyJywgW1xyXG5cdCdwb2tldHJhaW5lci5Nb2R1bGUuVGVtcGxhdGVzJyxcclxuXHJcblx0LyoqIEludGVybmFsIE1vZHVsZXMgKiovXHJcblx0J1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLFxyXG5cclxuXHQvKiogSW50ZXJuYWwgU2VydmljZXMgKiovXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuTmF2aWdhdGlvbicsXHJcblx0J1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0RXZlbnQnLFxyXG5cdCdQb2tldHJhaW5lci5TZXJ2aWNlLlNvY2tldCcsXHJcblxyXG5cdC8qKiBTdGF0ZXMvUm91dGVzICoqL1xyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5TdGF0dXMnLFxyXG5cdCdQb2tldHJhaW5lci5TdGF0ZS5Vc2VycycsXHJcblxyXG5cclxuXHQvKiogRXh0ZXJuYWwgTGlicyAqKi9cclxuXHQndWkucm91dGVyJyxcclxuICAgICduZ01hdGVyaWFsJyxcclxuICAgICduZ01lc3NhZ2VzJ1xyXG5cclxuXHQvKiogSW50ZXJuYWwgRGlyZWN0aXZlcyAqKi9cclxuXHRcclxuXSlcclxuXHJcblx0LmNvbmZpZyhmdW5jdGlvbiBwb2tlVHJhaW5lckNvbmZpZygkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyLCAkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlciwgJG1kVGhlbWluZ1Byb3ZpZGVyKSB7XHJcblx0XHQvLyRsb2NhdGlvblByb3ZpZGVyXHJcblx0XHQvL1x0Lmhhc2hQcmVmaXgoJyEnKVxyXG5cdFx0Ly9cdC5odG1sNU1vZGUoZmFsc2UpO1xyXG5cclxuXHRcdCR1cmxSb3V0ZXJQcm92aWRlci5ydWxlKGZ1bmN0aW9uICgkaW5qZWN0b3IsICRsb2NhdGlvbikge1xyXG5cdFx0XHR2YXIgcGF0aCA9ICRsb2NhdGlvbi51cmwoKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0Ly8gY2hlY2sgdG8gc2VlIGlmIHRoZSBwYXRoIGFscmVhZHkgaGFzIGEgc2xhc2ggd2hlcmUgaXQgc2hvdWxkIGJlXHJcblx0XHRcdGlmIChwYXRoW3BhdGgubGVuZ3RoIC0gMV0gPT09ICcvJyB8fCBwYXRoLmluZGV4T2YoJy8/JykgPiAtMSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHBhdGguaW5kZXhPZignPycpID4gLTEpIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5yZXBsYWNlKCc/JywgJy8/Jyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwYXRoICsgJy8nO1xyXG5cdFx0fSlcclxuXHRcdC5vdGhlcndpc2UoJy8nKTtcclxuXHJcblx0XHQkdXJsTWF0Y2hlckZhY3RvcnlQcm92aWRlci5zdHJpY3RNb2RlKGZhbHNlKTtcclxuXHJcbiAgICAgICAgJG1kVGhlbWluZ1Byb3ZpZGVyLnRoZW1lKCdkZWZhdWx0JylcclxuICAgICAgICAgICAgLnByaW1hcnlQYWxldHRlKCdibHVlJylcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3JlZCcpO1xyXG5cclxuXHR9KVxyXG5cclxuXHQucnVuKGZ1bmN0aW9uIHBva2VUcmFpbmVyUnVuICgkc3RhdGUsICRyb290U2NvcGUsICRkb2N1bWVudCkge1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJ2ludmVudG9yeTp1cGRhdGVkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpe1xyXG5cdFx0XHQvL2NvbnNvbGUubG9nKFwiSW52ZW50b3J5ISEgOkQgXCIpXHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdGFydCcsIGZ1bmN0aW9uKCl7XHJcblx0XHRcdCRkb2N1bWVudC5maW5kKCcuc2NyZWVuLWxvYWRpbmctb3ZlcmxheScpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHRcdH0pO1xyXG5cdFx0JHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN1Y2Nlc3MnLCBmdW5jdGlvbigpe1xyXG5cdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcblx0XHR9KTtcclxuXHRcdCRyb290U2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VFcnJvcicsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcywgZXJyb3IpIHtcclxuXHRcdFx0aWYgKGVycm9yID09PSBcIm9mZmxpbmVcIikge1xyXG5cdFx0XHRcdCRzdGF0ZS5nbyhcInB1YmxpYy51c2Vyc1wiKTtcclxuXHRcdFx0XHQkZG9jdW1lbnQuZmluZCgnLnNjcmVlbi1sb2FkaW5nLW92ZXJsYXknKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0pXHJcblxyXG47IiwiYW5ndWxhci5tb2R1bGUoJ1Bva2V0cmFpbmVyLk1vZHVsZS5Tb2NrZXRFdmVudEVtaXR0ZXInLCBbJ1Bva2V0cmFpbmVyLlNlcnZpY2UuU29ja2V0J10pXHJcbiAgICAucnVuKGZ1bmN0aW9uIHJ1blNvY2tldEVtaXR0ZXIoJHJvb3RTY29wZSwgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG5cclxuICAgICAgICBQb2tlU29ja2V0LmZvcndhcmQoU29ja2V0RXZlbnQuVXNlclN0YXR1cyk7XHJcblxyXG4gICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuRGF0YSwgZnVuY3Rpb24gZ2V0U29ja2V0UHVzaChkYXRhKXtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkdvdCBwdXNoIGRhdGE6IFwiLCBkYXRhKTtcclxuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KGRhdGEuZXZlbnQgKyBcIjpcIiArIGRhdGEuYWN0aW9uLCBkYXRhLmRhdGEpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBCcm9hZGNhc3QgZXZlbnRzIHVzaW5nICRyb290U2NvcGUuJGJyb2FkY2FzdChbbmFtZV0sIFtkYXRhXSk7XHJcbiAgICB9KVxyXG5cclxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5BYnN0cmFjdHMnLCBbXHJcbiAgICAndWkucm91dGVyJ1xyXG5dKVxyXG5cclxuICAgIC5jb25maWcoZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKCdwdWJsaWMnLCB7XHJcbiAgICAgICAgICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZpZXdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJoZWFkZXJcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy9hYnN0cmFjdHMvaGVhZGVyLnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ0hlYWRlckNvbnRyb2xsZXInXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBcImNvbnRlbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzx1aS12aWV3Lz4nXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLmNvbnRyb2xsZXIoJ0hlYWRlckNvbnRyb2xsZXInLCBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlLCBOYXZpZ2F0aW9uKXtcclxuICAgICAgICAkc2NvcGUubmF2aWdhdGlvbiA9IE5hdmlnYXRpb24ucHJpbWFyeS5nZXQoKTtcclxuICAgICAgICAkc2NvcGUuc3RhdGUgPSAkc3RhdGUuY3VycmVudC5uYW1lO1xyXG5cclxuICAgICAgICAkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uIChldmVudCwgdG9TdGF0ZSwgdG9QYXJhbXMsIGZyb21TdGF0ZSwgZnJvbVBhcmFtcykge1xyXG4gICAgICAgICAgICAkc2NvcGUuc3RhdGUgPSB0b1N0YXRlLm5hbWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG5cclxuOyIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5TdGF0dXMnLCBbXHJcbiAgICAndWkucm91dGVyJyxcclxuICAgICd1aUdtYXBnb29nbGUtbWFwcycsXHJcbiAgICAnY2hhcnQuanMnLFxyXG4gICAgJ2Vhc3lwaWVjaGFydCcsXHJcbiAgICAnZGF0YXRhYmxlcycsXHJcbiAgICAndWktbGVhZmxldCcsXHJcbiAgICAnbmVtTG9nZ2luZydcclxuXSlcclxuXHJcbiAgICAuY29uZmlnKGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgdWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgdWlHbWFwR29vZ2xlTWFwQXBpUHJvdmlkZXIuY29uZmlndXJlKHtcclxuICAgICAgICAgICAgLy9rZXk6ICc8TUFQUyBBUEkgS0VZPicsXHJcbiAgICAgICAgICAgIHY6ICczLjI0JyxcclxuICAgICAgICAgICAgbGlicmFyaWVzOiAnd2VhdGhlcixnZW9tZXRyeSx2aXN1YWxpemF0aW9uJ1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncHVibGljLmRhc2hib2FyZCcsIHtcclxuICAgICAgICAgICAgdXJsOiAnL2Rhc2hib2FyZC86dXNlcm5hbWUnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICBsb2NhdGlvbkRhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlTG9jYXRpb25EYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbkRhdGFDYiA9IGZ1bmN0aW9uIGxvY2F0aW9uRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ2xvY2F0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgbG9jYXRpb25EYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ2xvY2F0aW9uJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgaW52ZW50b3J5RGF0YTogWyckcScsICckc3RhdGVQYXJhbXMnLCAnUG9rZVNvY2tldCcsICdTb2NrZXRFdmVudCcsIGZ1bmN0aW9uIHJlc29sdmVJbnZlbnRvcnlEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnZlbnRvcnlEYXRhQ2IgPSBmdW5jdGlvbiBpbnZlbnRvcnlEYXRhQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8IG1lc3NhZ2UudHlwZSAhPSAnaW52ZW50b3J5Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBpbnZlbnRvcnlEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ2ludmVudG9yeSddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBsYXllckRhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlUGxheWVyRGF0YSgkcSwgJHN0YXRlUGFyYW1zLCBQb2tlU29ja2V0LCBTb2NrZXRFdmVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGxheWVyRGF0YUNiID0gZnVuY3Rpb24gcGxheWVyRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ3BsYXllcicpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgcGxheWVyRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydwbGF5ZXInXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV0sXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXJTdGF0c0RhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlUGxheWVyU3RhdHNEYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwbGF5ZXJTdGF0c0RhdGFDYiA9IGZ1bmN0aW9uIHBsYXllclN0YXRzRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ3BsYXllcl9zdGF0cycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLnJlamVjdCgnb2ZmbGluZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGQucmVzb2x2ZShhbmd1bGFyLmZyb21Kc29uKG1lc3NhZ2UuZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQub24oU29ja2V0RXZlbnQuUmVxdWVzdCwgcGxheWVyU3RhdHNEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ3BsYXllcl9zdGF0cyddXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIHBva2Vtb25EYXRhOiBbJyRxJywgJyRzdGF0ZVBhcmFtcycsICdQb2tlU29ja2V0JywgJ1NvY2tldEV2ZW50JywgZnVuY3Rpb24gcmVzb2x2ZVBva2Vtb25EYXRhKCRxLCAkc3RhdGVQYXJhbXMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9ICRxLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb2tlbW9uRGF0YUNiID0gZnVuY3Rpb24gcG9rZW1vbkRhdGFDYihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobWVzc2FnZSkgfHwgbWVzc2FnZS50eXBlICE9ICdwb2tlbW9uJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQucmVqZWN0KCdvZmZsaW5lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZC5yZXNvbHZlKGFuZ3VsYXIuZnJvbUpzb24obWVzc2FnZS5kYXRhKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5SZXF1ZXN0LCBwb2tlbW9uRGF0YUNiKTtcclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuUmVxdWVzdCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlczogWydwb2tlbW9uJ11cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgYXR0YWNrc0RhdGE6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlQXR0YWNrc0RhdGEoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dGFja3NEYXRhQ2IgPSBmdW5jdGlvbiBhdHRhY2tzRGF0YUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5ndWxhci5pc1VuZGVmaW5lZChtZXNzYWdlKSB8fCBtZXNzYWdlLnR5cGUgIT0gJ2F0dGFja3MnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2Uuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5yZWplY3QoJ29mZmxpbmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUoYW5ndWxhci5mcm9tSnNvbihtZXNzYWdlLmRhdGEpKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBQb2tlU29ja2V0Lm9uKFNvY2tldEV2ZW50LlJlcXVlc3QsIGF0dGFja3NEYXRhQ2IpO1xyXG4gICAgICAgICAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5SZXF1ZXN0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGVzOiBbJ2F0dGFja3MnXVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Rhc2hib2FyZENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy9kYXNoYm9hcmQvZGFzaGJvYXJkLnRwbC5odG1sJ1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfSlcclxuXHJcbiAgICAucnVuKGZ1bmN0aW9uIChOYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgTmF2aWdhdGlvbi5wcmltYXJ5LnJlZ2lzdGVyKFwiVXNlcnNcIiwgXCJwdWJsaWMudXNlcnNcIiwgMzAsICdtZCBtZC1ldmVudC1hdmFpbGFibGUnLCAncHVibGljLnVzZXJzJyk7XHJcbiAgICB9KVxyXG5cclxuICAgIC5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJywgZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigkc2NvcGUsICRzdGF0ZVBhcmFtcywgJG1kVG9hc3QsIFBva2VTb2NrZXQsIGxlYWZsZXREYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uRGF0YSwgaW52ZW50b3J5RGF0YSwgcGxheWVyRGF0YSwgcGxheWVyU3RhdHNEYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBva2Vtb25EYXRhLCBhdHRhY2tzRGF0YSwgU29ja2V0RXZlbnQsIERUT3B0aW9uc0J1aWxkZXIpIHtcclxuICAgICAgICB2YXIgdXNlckV2ZW50VXBkYXRlID0gZnVuY3Rpb24gdXNlckV2ZW50VXBkYXRlKGV2ZW50LCBtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGlmICgkc3RhdGVQYXJhbXMudXNlcm5hbWUgPT0gbWVzc2FnZS51c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2Uuc3RhdHVzID09ICdvZmZsaW5lJykge1xyXG4gICAgICAgICAgICAgICAgICAgICRzdGF0ZS5nbygncHVibGljLnVzZXJzJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS4kb24oU29ja2V0RXZlbnQuX3ByZWZpeCArIFNvY2tldEV2ZW50LlVzZXJTdGF0dXMsIHVzZXJFdmVudFVwZGF0ZSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oXCIkZGVzdHJveVwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuTGVhdmUsIHtyb29tOiAkc3RhdGVQYXJhbXMudXNlcm5hbWV9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBKb2luIHNwZWNpZmljIHVzZXIgcm9vbVxyXG4gICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5Kb2luLCB7cm9vbTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lfSk7XHJcblxyXG4gICAgICAgIC8qKiBUUkFOU0ZFUiAqKi9cclxuICAgICAgICB2YXIgdHJhbnNmZXJfcF9pZDtcclxuICAgICAgICB2YXIgdHJhbnNmZXJDYiA9IGZ1bmN0aW9uIHRyYW5zZmVyQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICRzY29wZS50cmFuc2Zlcl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZS5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSB0cmFuc2Zlcl9wX2lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0cmFuc2Zlcl9wX2lkID0gMDtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5UcmFuc2ZlciwgdHJhbnNmZXJDYik7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudChtZXNzYWdlLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUudHJhbnNmZXIgPSBmdW5jdGlvbihwX2lkKSB7XHJcbiAgICAgICAgICAgIHRyYW5zZmVyX3BfaWQgPSBwX2lkO1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5UcmFuc2ZlciwgdHJhbnNmZXJDYik7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQuZW1pdChTb2NrZXRFdmVudC5UcmFuc2Zlciwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIHBfaWQ6IHBfaWR9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogRVZPTFZFICoqL1xyXG4gICAgICAgIHZhciBldm9sdmVDYiA9IGZ1bmN0aW9uIGV2b2x2ZUNiKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmV2b2x2ZV9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkc2NvcGUudHJhbnNmZXJfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5Fdm9sdmUsIGV2b2x2ZUNiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5ldm9sdmVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuZXZvbHZlID0gZnVuY3Rpb24ocF9pZCkge1xyXG4gICAgICAgICAgICAkc2NvcGUuZXZvbHZlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgJHNjb3BlLnRyYW5zZmVyX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5Fdm9sdmUsIGV2b2x2ZUNiKTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LkV2b2x2ZSwge3VzZXJuYW1lOiAkc3RhdGVQYXJhbXMudXNlcm5hbWUsIHBfaWQ6IHBfaWR9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKiogU05JUEUgKiovXHJcbiAgICAgICAgdmFyIHNuaXBlZENiID0gZnVuY3Rpb24gc25pcGVkQ2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAvL21lc3NhZ2Uuc3VjY2VzcztcclxuICAgICAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFBva2VTb2NrZXQucmVtb3ZlTGlzdGVuZXIoU29ja2V0RXZlbnQuU25pcGUsIHNuaXBlZENiKTtcclxuICAgICAgICAgICAgJG1kVG9hc3Quc2hvdyhcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LnNpbXBsZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRleHRDb250ZW50KG1lc3NhZ2UubWVzc2FnZSlcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgICRzY29wZS5zbmlwZV9jb29yZHMgPSAnJztcclxuICAgICAgICAkc2NvcGUuc25pcGVfZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAkc2NvcGUuc25pcGVfYXV0byA9IGZhbHNlOyAvLyBub3QgaW1wbGVtZW50ZWRcclxuICAgICAgICAkc2NvcGUuc25pcGUgPSBmdW5jdGlvbihzbmlwZV9jb29yZHMpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnNuaXBlX2Rpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5TbmlwZSwgc25pcGVkQ2IpO1xyXG4gICAgICAgICAgICBQb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuU25pcGUsIHt1c2VybmFtZTogJHN0YXRlUGFyYW1zLnVzZXJuYW1lLCBsYXRsbmc6IHNuaXBlX2Nvb3Jkc30pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgXHJcbiAgICAgICAgJHNjb3BlLiRvbignaW52ZW50b3J5OnVwZGF0ZWQnLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBcclxuIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLmludmVudG9yeSA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXJfc3RhdHM6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXJTdGF0cyA9IGRhdGE7XHJcbiAgICAgICAgICAgIHVwZGF0ZVBlcmNlbnRhZ2VzKCk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwbGF5ZXI6dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wbGF5ZXIgPSBkYXRhO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gwqAgwqAgwqAgwqB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhpcyBtYWtlcyB0aGUgcG9rZW1vbiB0YWJsZSBnbyBjcmF6eSBmb3IgYSBiaXRcclxuICAgICAgICAvLyB3ZSBpbnNlcnQgLyBkZWxldGUgYmFzZWQgb24gb3RoZXIgZXZlbnMsIHNvIGl0IF9zaG91bGRfIGJlIGFjY3VyYXRlIGFueXdheVxyXG4gICAgICAgIC8qJHNjb3BlLiRvbignY2F1Z2h0X3Bva2Vtb246dXBkYXRlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRzY29wZS5wb2tlbW9uID0gZGF0YTtcclxuIMKgIMKgIMKgIMKgfSk7Ki9cclxuIFxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246Y2F1Z2h0JywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICAvL3Bva2Vtb24uY3JlYXRpb25fdGltZV9tcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucG9rZW1vbi5wdXNoKHBva2Vtb24pO1xyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0NhdWdodDogJyArIHBva2Vtb24ubmFtZSArICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uLml2KSArICcgfCBDUDogJyArIHBva2Vtb24uY3AgKyAnKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBvc2l0aW9uKCd0b3AgY2VudGVyJylcclxuICAgICAgICAgICAgICAgICAgICAuaGlkZURlbGF5KDMwMDApXHJcbiAgICAgICAgICAgICk7XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUuJG9uKCdwb2tlbW9uOnJlbGVhc2VkJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHBva2Vtb24gPSBkYXRhO1xyXG4gICAgICAgICAgICBmb3IodmFyIGk9JHNjb3BlLnBva2Vtb24ubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wb2tlbW9uW2ldLmlkID09IHBva2Vtb24uaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9rZW1vbi5zcGxpY2UoaSwxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVQZXJjZW50YWdlcygpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ1JlbGVhc2VkOiAnICsgcG9rZW1vbi5uYW1lICsgJyAoSVY6ICcgKyBNYXRoLmZsb29yKHBva2Vtb24uaXYpICsgJyB8IENQOiAnICsgcG9rZW1vbi5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ3Bva2Vtb246ZXZvbHZlZCcsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2tlbW9uX29sZCA9IGRhdGEub2xkO1xyXG4gICAgICAgICAgICB2YXIgcG9rZW1vbl9uZXcgPSBkYXRhLm5ldztcclxuICAgICAgICAgICAgZm9yKHZhciBpPSRzY29wZS5wb2tlbW9uLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucG9rZW1vbltpXS5pZCA9PSBwb2tlbW9uX29sZC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb2tlbW9uLnNwbGljZShpLDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5wb2tlbW9uLnB1c2gocG9rZW1vbl9uZXcpO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3Quc2ltcGxlKClcclxuICAgICAgICAgICAgICAgICAgICAudGV4dENvbnRlbnQoJ0V2b2x2ZWQ6ICcgKyBwb2tlbW9uX29sZC5uYW1lICsgJyB0byAnICsgcG9rZW1vbl9uZXcubmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICcgKElWOiAnICsgTWF0aC5mbG9vcihwb2tlbW9uX25ldy5pdikgKyAnIHwgQ1A6ICcgKyBwb2tlbW9uX25ldy5jcCArICcpJylcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcblxyXG4gICAgICAgICRzY29wZS4kb24oJ2ZvcnQ6c3B1bicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0Q29udGVudCgnRm9ydCBzcHVuLCByZXdhcmQ6ICcgKyBkYXRhLnJld2FyZClcclxuICAgICAgICAgICAgICAgICAgICAucG9zaXRpb24oJ3RvcCBjZW50ZXInKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoMzAwMClcclxuICAgICAgICAgICAgKTtcclxuIMKgIMKgIMKgIMKgfSk7XHJcbiBcclxuICAgICAgICB2YXIgcG9zaXRpb25VcGRhdGVzID0gMDtcclxuIMKgIMKgIMKgIMKgJHNjb3BlLiRvbigncG9zaXRpb246dXBkYXRlJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgcG9zaXRpb25VcGRhdGVzKys7XHJcbiDCoCDCoCDCoCDCoCDCoCDCoGlmIChwb3NpdGlvblVwZGF0ZXMgJSA1ID09IDApIHtcclxuIMKgIMKgIMKgIMKgIMKgIMKgIMKgIMKgJHNjb3BlLm1hcmtlcnMuYm90LmxhdCA9IGRhdGFbMF07XHJcbiDCoCDCoCDCoCDCoCDCoCDCoCDCoCDCoCRzY29wZS5tYXJrZXJzLmJvdC5sbmcgPSBkYXRhWzFdO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqB2YXIgbmV3TG9jYXRpb24gPSB7bGF0OiBkYXRhWzBdLCBsbmc6IGRhdGFbMV19O1xyXG4gwqAgwqAgwqAgwqAgwqAgwqAgwqAgwqAkc2NvcGUucGF0aHMubWFpbi5sYXRsbmdzLnB1c2gobmV3TG9jYXRpb24pO1xyXG4gwqAgwqAgwqAgwqAgwqAgwqB9XHJcbiDCoCDCoCDCoCDCoH0pO1xyXG5cclxuICAgICAgICAkc2NvcGUucGxheWVyID0gcGxheWVyRGF0YTtcclxuICAgICAgICAkc2NvcGUucGxheWVyU3RhdHMgPSBwbGF5ZXJTdGF0c0RhdGE7XHJcbiAgICAgICAgJHNjb3BlLmludmVudG9yeSA9IGludmVudG9yeURhdGE7XHJcbiAgICAgICAgJHNjb3BlLnBva2Vtb24gPSBwb2tlbW9uRGF0YTtcclxuICAgICAgICAkc2NvcGUuYXR0YWNrcyA9IGF0dGFja3NEYXRhO1xyXG5cclxuICAgICAgICB2YXIgdXBkYXRlUGVyY2VudGFnZXMgPSBmdW5jdGlvbiB1cGRhdGVQZXJjZW50YWdlcygpIHtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnhwUGVyY2VudCA9IE1hdGguZmxvb3IoXHJcbiAgICAgICAgICAgICAgICAoJHNjb3BlLnBsYXllclN0YXRzLmV4cGVyaWVuY2UgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgIC8oJHNjb3BlLnBsYXllclN0YXRzLm5leHRfbGV2ZWxfeHAgLSAkc2NvcGUucGxheWVyU3RhdHMucHJldl9sZXZlbF94cClcclxuICAgICAgICAgICAgICAgICoxMDBcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgJHNjb3BlLnBsYXllclN0YXRzLnVuaXF1ZVBva2VkZXhQZXJjZW50ID0gTWF0aC5mbG9vcigkc2NvcGUucGxheWVyU3RhdHMudW5pcXVlX3Bva2VkZXhfZW50cmllcyAvIDE1MSAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5wb2tlbW9uSW52UGVyY2VudCA9IE1hdGguZmxvb3IoJHNjb3BlLnBva2Vtb24ubGVuZ3RoIC8gJHNjb3BlLnBsYXllci5tYXhfcG9rZW1vbl9zdG9yYWdlICAqIDEwMCk7XHJcbiAgICAgICAgICAgICRzY29wZS5wbGF5ZXJTdGF0cy5pdGVtc0ludlBlcmNlbnQgPSBNYXRoLmZsb29yKCRzY29wZS5pbnZlbnRvcnkuaXRlbV9jb3VudCAvICRzY29wZS5wbGF5ZXIubWF4X2l0ZW1fc3RvcmFnZSAgKiAxMDApO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdXBkYXRlUGVyY2VudGFnZXMoKTtcclxuXHJcbiAgICAgICAgLy8gdmVyeSBkaXJ0eSBmaXggdG8gbWFrZSB0aGUgbGVhZmxldCBtYXAgbG9hZCBmdWxsc2NyZWVuXHJcbiAgICAgICAgJHNjb3BlLiRvbignJHZpZXdDb250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IG1hcC5pbnZhbGlkYXRlU2l6ZSgpOyB9LCAzMDAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLm1hcCA9IHsgY2VudGVyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IGxvY2F0aW9uRGF0YVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogbG9jYXRpb25EYXRhWzFdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgem9vbTogMTVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5tYXJrZXJzID0ge1xyXG4gICAgICAgICAgICBib3Q6IHtcclxuICAgICAgICAgICAgICAgIGxhdDogbG9jYXRpb25EYXRhWzBdLFxyXG4gICAgICAgICAgICAgICAgbG5nOiBsb2NhdGlvbkRhdGFbMV0sXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAkc2NvcGUucGxheWVyLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBkcmFnZ2FibGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wYXRocyA9IHtcclxuICAgICAgICAgICAgbWFpbjoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjRjQ0MzM2JyxcclxuICAgICAgICAgICAgICAgIHdlaWdodDogNCxcclxuICAgICAgICAgICAgICAgIGxhdGxuZ3M6IFtcclxuICAgICAgICAgICAgICAgICAgICB7IGxhdDogbG9jYXRpb25EYXRhWzBdLCBsbmc6IGxvY2F0aW9uRGF0YVsxXSB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgICRzY29wZS5wb2tlbW9uRGF0YVRhYmxlT3B0aW9ucyA9IERUT3B0aW9uc0J1aWxkZXIubmV3T3B0aW9ucygpXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdvcmRlcicsIFtbIDAsIFwiZGVzY1wiIF1dKVxyXG4gICAgICAgICAgICAud2l0aE9wdGlvbignc3RhdGVTYXZlJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC8qLndpdGhPcHRpb24oJ3Njcm9sbFknLCAnNzV2aCcpXHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdzY3JvbGxYJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIC53aXRoT3B0aW9uKCdwYWdpbmcnLCB0cnVlKSovXHJcblxyXG4gICAgICAgICRzY29wZS5leHBMdmxPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRlOntcclxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOjEwMDAsXHJcbiAgICAgICAgICAgICAgICBlbmFibGVkOnRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYmFyQ29sb3I6JyMwM0E5RjQnLFxyXG4gICAgICAgICAgICBzY2FsZUNvbG9yOmZhbHNlLFxyXG4gICAgICAgICAgICBsaW5lV2lkdGg6MTAsXHJcbiAgICAgICAgICAgIGxpbmVDYXA6J2NpcmNsZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUudW5pcXVlUG9rZWRleE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGU6e1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MTAwMCxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6dHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJDb2xvcjonI0ZGQzEwNycsXHJcbiAgICAgICAgICAgIHNjYWxlQ29sb3I6ZmFsc2UsXHJcbiAgICAgICAgICAgIGxpbmVXaWR0aDoxMCxcclxuICAgICAgICAgICAgbGluZUNhcDonY2lyY2xlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRzY29wZS5wb2tlbW9uSW52T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjMDA5Njg4JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLml0ZW1zSW52T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0ZTp7XHJcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjoxMDAwLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDp0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhckNvbG9yOicjRjQ0MzM2JyxcclxuICAgICAgICAgICAgc2NhbGVDb2xvcjpmYWxzZSxcclxuICAgICAgICAgICAgbGluZVdpZHRoOjEwLFxyXG4gICAgICAgICAgICBsaW5lQ2FwOidjaXJjbGUnXHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuXHJcbiAgICB9KVxyXG47XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdQb2tldHJhaW5lci5TdGF0ZS5Vc2VycycsIFtcclxuICAgICd1aS5yb3V0ZXInXHJcbl0pXHJcblxyXG4gICAgLmNvbmZpZyhmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgncHVibGljLnVzZXJzJywge1xyXG4gICAgICAgICAgICB1cmw6ICcvJyxcclxuICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgVXNlcnM6IFsnJHEnLCAnJHN0YXRlUGFyYW1zJywgJ1Bva2VTb2NrZXQnLCAnU29ja2V0RXZlbnQnLCBmdW5jdGlvbiByZXNvbHZlVXNlcnMoJHEsICRzdGF0ZVBhcmFtcywgUG9rZVNvY2tldCwgU29ja2V0RXZlbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gJHEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXJFdmVudENiID0gZnVuY3Rpb24gdXNlckV2ZW50Q2IobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhbmd1bGFyLmlzVW5kZWZpbmVkKG1lc3NhZ2UpIHx8ICFtZXNzYWdlLnN1Y2Nlc3MgfHwgIWFuZ3VsYXIuaXNBcnJheShtZXNzYWdlLnVzZXJzKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5yZW1vdmVMaXN0ZW5lcihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaG93IGFsbCB1c2VycyB0byB1bmtub3duIHN0YXRlIHVudGlsIHdlIHJlY2VpdmUgYSBwcm9wZXIgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZXNzYWdlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnVzZXJzW2ldLnN0YXR1cyA9ICd1bmtub3duJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkLnJlc29sdmUobWVzc2FnZS51c2Vycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5vbihTb2NrZXRFdmVudC5Vc2VyTGlzdCwgdXNlckV2ZW50Q2IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBFbWl0IHRoZSBldmVudCB0byBvdXIgc29ja2V0XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWZ0ZXIgbGlzdGVuaW5nIGZvciBpdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBkb24ndCBuZWVkIHRvIHNpbmNlIHdlIGNvbm5lY3QgYW55d2F5LCBhbnkgaXNzdWVzP1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdlIGVuZWQgaXQgdG8gZ2V0IGJhY2sgdG8gdGhlIGJvdHMtb3ZlcnZpZXc/XHJcbiAgICAgICAgICAgICAgICAgICAgUG9rZVNvY2tldC5lbWl0KFNvY2tldEV2ZW50LlVzZXJMaXN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3N0YXRlcy91c2Vycy91c2Vycy50cGwuaHRtbCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIDtcclxuICAgIH0pXHJcblxyXG4gICAgLnJ1bihmdW5jdGlvbiAoTmF2aWdhdGlvbikge1xyXG4gICAgICAgIE5hdmlnYXRpb24ucHJpbWFyeS5yZWdpc3RlcihcIlVzZXJzXCIsIFwicHVibGljLnVzZXJzXCIsIDMwLCAnbWQgbWQtZXZlbnQtYXZhaWxhYmxlJywgJ3B1YmxpYy51c2VycycpO1xyXG4gICAgfSlcclxuXHJcbiAgICAuY29udHJvbGxlcignVXNlcnNDb250cm9sbGVyJywgZnVuY3Rpb24gVXNlcnNDb250cm9sbGVyKCRzY29wZSwgVXNlcnMsIFBva2VTb2NrZXQsIFNvY2tldEV2ZW50KSB7XHJcbiAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCBhbnkgZGF0YSBmcm9tIHRoZSBnbG9iYWwgc2NvcGUgaGVyZS4uLiB5ZXQ/XHJcbiAgICAgICAgLy9Qb2tlU29ja2V0LmVtaXQoU29ja2V0RXZlbnQuSm9pbiwge3Jvb206ICdnbG9iYWwnfSk7XHJcbiAgICAgICAgJHNjb3BlLnVzZXJzID0gVXNlcnM7XHJcblxyXG4gICAgICAgIHZhciB1c2VyRXZlbnRVcGRhdGUgPSBmdW5jdGlvbiB1c2VyRXZlbnRVcGRhdGUoZXZlbnQsIG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUudXNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudXNlcnNbaV0udXNlcm5hbWUgPT0gbWVzc2FnZS51c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2Vyc1tpXS5zdGF0dXMgPSBtZXNzYWdlLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0byBsaXN0ZW4gZm9yIG5ldyBldmVudHNcclxuICAgICAgICAkc2NvcGUuJG9uKFNvY2tldEV2ZW50Ll9wcmVmaXggKyBTb2NrZXRFdmVudC5Vc2VyU3RhdHVzLCB1c2VyRXZlbnRVcGRhdGUpO1xyXG4gICAgfSlcclxuO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgnUG9rZXRyYWluZXIuU2VydmljZS5OYXZpZ2F0aW9uJywgW10pXHJcblxyXG4gICAgLmZhY3RvcnkoJ05hdmlnYXRpb24nLCBmdW5jdGlvbiBOYXZpZ2F0aW9uRmFjdG9yeSgpIHtcclxuICAgICAgICB2YXIgaGVhZGVyTmF2ID0gW107XHJcblxyXG4gICAgICAgIHZhciBnZXRQcmltYXJ5TWVudSA9IGZ1bmN0aW9uIGdldFByaW1hcnlNZW51KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaGVhZGVyTmF2LnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcmlvcml0eSA9IGEuUHJpb3JpdHkgLSBiLlByaW9yaXR5O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhLkxhYmVsLmxvY2FsZUNvbXBhcmUoYi5MYWJlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaW9yaXR5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciByZWdpc3RlclByaW1hcnlNZW51ID0gZnVuY3Rpb24gcmVnaXN0ZXJQcmltYXJ5TWVudShsYWJlbCwgc3RhdGUsIHByaW9yaXR5LCBpY29uLCBhY3RpdmVTdGF0ZSkge1xyXG4gICAgICAgICAgICBpZiggdHlwZW9mKGljb24pICE9PSBcInN0cmluZ1wiKXtcclxuICAgICAgICAgICAgICAgIGljb24gPSBcIm1kIG1kLWNoZXZyb24tcmlnaHRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiggdHlwZW9mKGFjdGl2ZVN0YXRlKSAhPT0gXCJzdHJpbmdcIil7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmVTdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChwcmlvcml0eSkgIT09IFwibnVtYmVyXCIgfHwgcHJpb3JpdHkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBwcmlvcml0eSA9IDEwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBoZWFkZXJOYXYucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBMYWJlbDogbGFiZWwsXHJcbiAgICAgICAgICAgICAgICBTdGF0ZTogc3RhdGUsXHJcbiAgICAgICAgICAgICAgICBBY3RpdmVTdGF0ZTogYWN0aXZlU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBQcmlvcml0eTogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICBJY29uOiBpY29uXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByaW1hcnk6IHtcclxuICAgICAgICAgICAgICAgIGdldDogZ2V0UHJpbWFyeU1lbnUsXHJcbiAgICAgICAgICAgICAgICByZWdpc3RlcjogcmVnaXN0ZXJQcmltYXJ5TWVudVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
